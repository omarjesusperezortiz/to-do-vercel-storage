import{o as r,f as _,d as e,p as S,k as A,l as M,m as y,a as B,b as v,e as h,w as b,t as D,g as x,T as C,i as N,v as E,F as U,n as q,q as F,x as w,u as j,s as z,y as G,j as O}from"./index.580d614a.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const J=s=>(S("data-v-d8102344"),s=s(),A(),s),P={class:"nav"},Q=J(()=>e("h1",{class:"app-logo"},[e("span",{class:"clip"},"TaskApp")],-1)),W={class:"user-container"},X={__name:"Navbar",emits:["log-out"],setup(s,{emit:a}){const o=()=>{a("log-out")};return(n,i)=>(r(),_("div",P,[Q,e("div",W,[e("button",{class:"logOut",onClick:i[0]||(i[0]=d=>o())},"Cerrar sesion")])]))}},Y=I(X,[["__scopeId","data-v-d8102344"]]),$=M("task",{state:()=>({task:[]}),actions:{async fetchTasks(){const{data:s}=await y.from("Task").select("*").order("id",{ascending:!1});return this.task=s,console.log(s,"lista de tasks"),this.task},async addTask(s,a){await y.from("Task").insert([{user_id:B().user.id,title:s,is_complete:!1,description:a}])},async updateTask(s,a,o){const n=await y.from("Task").update({title:s,description:a}).match({id:o});console.log(n)},async deleteTask(s){const a=await y.from("Task").delete().match({id:s});console.log(a)},async toggleTask(s,a){await y.from("Task").update({is_complete:s}).match({id:a})}}});const H=s=>(S("data-v-76bedec0"),s=s(),A(),s),Z={key:0,class:"addError"},ee={class:"error-text"},se={class:"form-container"},te={class:"form-group"},ae={class:"form-group"},oe=H(()=>e("span",null,"Agregar",-1)),ne=H(()=>e("span",{class:"commandenter"},"\u2318 enter",-1)),le=[oe,ne],ce={__name:"NewTask",emits:["add-task","show"],setup(s,{emit:a}){$();const o=v(""),n=v(""),i=v(!1),d=v(null),m=()=>{if(o.value.length===0||n.value.length===0)i.value=!0,d.value="\xA1Tienes que llenar ambos campos!",setTimeout(()=>{i.value=!1},5e3);else{const p={name:o.value,description:n.value};console.log(p),a("add-task",p),o.value="",n.value="",a("show")}};return document.addEventListener("keydown",p=>{(p.metaKey||p.ctrlKey)&&p.key==="Enter"&&(console.log("fire!"),m())}),(p,u)=>(r(),_(U,null,[h(C,null,{default:b(()=>[i.value?(r(),_("div",Z,[e("h3",ee,D(d.value),1)])):x("",!0)]),_:1}),e("div",se,[e("div",te,[N(e("input",{class:"input-field-input",type:"text",placeholder:"Titulo de tarea","onUpdate:modelValue":u[0]||(u[0]=g=>o.value=g)},null,512),[[E,o.value]])]),e("div",ae,[N(e("textarea",{class:"input-field-input",rows:"4",type:"text",placeholder:"Descripcion...","onUpdate:modelValue":u[1]||(u[1]=g=>n.value=g)},null,512),[[E,n.value]])]),e("div",{class:"form-group task-button"},[e("button",{onClick:m,class:"button"},le)])])],64))}},ie=I(ce,[["__scopeId","data-v-76bedec0"]]);const L=s=>(S("data-v-49f651a2"),s=s(),A(),s),de={class:"task-container"},ue={class:"card-task"},re=["onClick"],_e=L(()=>e("i",{class:"fa-solid fa-check"},null,-1)),pe=[_e],ve={class:"overflow"},ke={class:"overflow"},fe=["onClick"],he=L(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),me=[he],ge=["onClick"],Te=L(()=>e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),ye=[Te],we={key:0,class:"changeName"},be={class:"add-task-form"},$e={class:"form-group"},xe={class:"form-group"},Ce={class:"form-group change-button"},Ne=["onClick"],Ee=["onClick"],Se={__name:"TaskCard",props:{task:Array},emits:["editTask","deleteTask","toggleTask"],setup(s,{emit:a}){const o=v(""),n=v(""),i=v(!1),d=v(null),m=v(!1),p=c=>{d.value=c.id,i.value=!i.value,o.value=c.title,n.value=c.description},u=(c,k)=>{c=!c,m.value=!m.value,a("toggleTask",c,k)},g=c=>{a("deleteTask",c)},K=(c,k)=>{console.log(o.value,c,n.value,"name input value"),a("editTask",o.value,n.value,c),o.value="",n.value="",i.value=!1};return document.addEventListener("keydown",c=>{c.key==="Escape"&&(i.value=!1)}),(c,k)=>(r(),_("div",de,[h(F,null,{default:b(()=>[(r(!0),_(U,null,q(s.task,(l,T)=>(r(),_("div",{class:w(["card-container",{doneCard:l.is_complete==!0}])},[e("div",ue,[e("button",{class:w(["buttonDone buttonRight",{buttonlight:l.is_complete==!0,doneclicked:l.is_complete==!0}]),type:"button",onClick:t=>u(l.is_complete,l.id),id:"buttonDone"},pe,10,re),e("h3",ve,D(l.title),1),e("p",ke,D(l.description),1),l.is_complete?(r(),_("button",{key:0,class:w([{buttonlight:l.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>g(l.id),id:"buttonDelete"},me,10,fe)):(r(),_("button",{key:1,class:w([{buttonlight:l.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>p(l),id:"buttonEdit"},ye,10,ge))]),h(C,null,{default:b(()=>[i.value&&d.value===l.id?(r(),_("div",we,[e("div",be,[e("div",$e,[N(e("input",{class:"input-field-input",type:"text","onUpdate:modelValue":k[0]||(k[0]=t=>o.value=t)},null,512),[[E,o.value]])]),e("div",xe,[N(e("textarea",{class:"input-field-input",type:"text",rows:"6",style:{overflow:"scroll"},"onUpdate:modelValue":k[1]||(k[1]=t=>n.value=t)},null,512),[[E,n.value]])]),e("div",Ce,[e("button",{onClick:t=>K(l.id,T),class:"button"}," Editar tarea ",8,Ne)])])])):x("",!0)]),_:2},1024),h(C,null,{default:b(()=>[i.value&&d.value===l.id?(r(),_("div",{key:0,onClick:t=>p(l),class:"background-task-effect"},null,8,Ee)):x("",!0)]),_:2},1024)],2))),256))]),_:1})]))}},Ae=I(Se,[["__scopeId","data-v-49f651a2"]]);const R=s=>(S("data-v-51797f9b"),s=s(),A(),s),Ie={class:"logo-container"},Ke={class:"main-container"},Ve=R(()=>e("h3",null,[O("No tienes tareas. "),e("br"),O("Agrega una nueva! ;)")],-1)),De=[Ve],Ue=R(()=>e("span",{class:"agregartext"}," Agregar tarea",-1)),Le=R(()=>e("span",{class:"commandkey"},"\u2318K",-1)),Re=[Ue,Le],Oe={key:0},Be={class:"card-container new-task",id:"newTask"},He={__name:"Home",setup(s){const a=$(),o=j(),n=B(),i=v([]),d=v(!1),{user:m}=z(n);(async()=>{await n.fetchUser(),console.log("Hola!,",m.value.email)})();const u=async()=>{i.value=await a.fetchTasks()};u();async function g(t){await a.addTask(t.name,t.description),u()}const K=async(t,f,V)=>{await $().updateTask(t,f,V),u()},c=async(t,f)=>{await a.toggleTask(t,f),u()},k=async t=>{await $().deleteTask(t),u()},l=async()=>{try{await y.auth.signOut(),o.push({name:"login"})}catch{}},T=()=>{d.value=!d.value};return document.addEventListener("keydown",t=>{t.key==="Escape"&&!(t.ctrlKey||t.altKey||t.shiftKey)&&(d.value=!1)}),document.addEventListener("keydown",t=>{(t.metaKey||t.ctrlKey)&&t.key==="k"&&T()}),(t,f)=>(r(),_(U,null,[e("header",null,[e("div",Ie,[h(Y,{onLogOut:l})])]),e("div",Ke,[e("div",{class:w(["dotasks",{appear:i.value==![]}])},De,2),e("button",{class:"AgregarTarea",onClick:f[0]||(f[0]=V=>T())},Re)]),h(C,null,{default:b(()=>[d.value?(r(),_("div",Oe,[e("div",{onClick:f[1]||(f[1]=V=>T()),class:"background-task-effect",id:"backTask"}),e("div",Be,[h(ie,{class:"newTaskBox",onAddTask:g,onShow:T})])])):x("",!0)]),_:1}),h(Ae,{task:G(a).task,onToggleTask:c,onEditTask:K,onDeleteTask:k},null,8,["task"])],64))}},Fe=I(He,[["__scopeId","data-v-51797f9b"]]);export{Fe as default};
